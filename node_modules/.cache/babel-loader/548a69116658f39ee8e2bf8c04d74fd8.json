{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bar-PC\\\\Desktop\\\\sprint 4\\\\src\\\\pages\\\\StayDetails.jsx\";\nimport { Component } from \"react\";\nimport { stayService } from \"../services/stay-service\";\nimport { ReviewList } from '../cmps/stay-details/ReviewList';\nimport { BookStay } from \"../cmps/stay-details/BookStay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class StayDetails extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      stay: null\n    };\n\n    this.scrollUp = () => {\n      window.scroll({\n        top: 0,\n        behavior: 'smooth'\n      });\n    };\n\n    this.loadStay = async () => {\n      const {\n        stayId\n      } = this.props.match.params;\n      const stay = await stayService.getById(stayId);\n      this.setState({\n        stay\n      });\n    };\n\n    this.getTotalRate = () => {\n      const rates = this.state.stay.reviews.map(review => review.avgRate);\n      const sum = rates.reduce((acc, rate) => {\n        acc += rate;\n        return acc;\n      }, 0);\n      return sum / rates.length;\n    };\n\n    this.getStayReviewStatistics = () => {\n      const {\n        reviews\n      } = this.state.stay;\n      const num = reviews.length;\n      if (!reviews) return;\n      const reviewCtgMap = {\n        \"Cleanliness\": 0,\n        \"Accuracy\": 0,\n        \"Communication\": 0,\n        \"Location\": 0,\n        \"Check-in\": 0,\n        \"Accessibility\": 0\n      };\n      reviews.forEach(review => {\n        for (const key in review.category) {\n          reviewCtgMap[key] += review.category[key];\n        }\n      });\n\n      for (const ctg in reviewCtgMap) {\n        reviewCtgMap[ctg] = +(reviewCtgMap[ctg] / num).toFixed(1);\n      }\n\n      const elReviews = [];\n\n      for (const ctg in reviewCtgMap) {\n        elReviews.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ctg-statistics\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: ctg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 74\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: reviewCtgMap[ctg]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 89\n          }, this)]\n        }, Math.random(), true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 22\n        }, this));\n      }\n\n      return elReviews;\n    };\n  }\n\n  componentDidMount() {\n    this.loadStay();\n    this.scrollUp();\n  }\n\n  getAmenityIcon(amenity) {\n    switch (amenity) {\n      case 'TV':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-tv\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 16\n        }, this);\n\n      case 'Wifi':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-wifi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 16\n        }, this);\n\n      case 'Air-conditioning':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-fan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 16\n        }, this);\n\n      case 'Smoking allowed':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-smoking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 16\n        }, this);\n\n      case 'Pets allowed':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-paw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this);\n\n      case 'Cooking basics':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-blender\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fab fa-airbnb\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 16\n        }, this);\n    }\n  }\n\n  render() {\n    const {\n      stay\n    } = this.state;\n    const {\n      loggedInUser,\n      toggleMsgModal\n    } = this.props;\n    if (!stay) return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 23\n    }, this);\n    const {\n      loc,\n      capacity,\n      desc,\n      amenities,\n      stayType,\n      propertyType,\n      reviews,\n      name,\n      host\n    } = stay;\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"stay-details-container page\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"stay-details-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stay-short-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stay-rate-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 51\n              }, this), this.getTotalRate().toFixed(1), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"( \", reviews.length, \" reviews )\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 114\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: loc.address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-external-link-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 26\n                }, this), \"share\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"stay-save-btn\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"far fa-heart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 52\n                }, this), \"save\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stay-gallery\",\n        children: stay.imgUrls.map(imgUrl => /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imgUrl,\n          alt: \"stay-gallery-preview-img\"\n        }, imgUrl, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 39\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"stay-info-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stay-long-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stay-long-info-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: `${propertyType} hosted by ${host.fullname}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [capacity, \" guests \\u2022 \", stayType, \" \\u2022 \", propertyType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: host.imgUrl,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stay-feature-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-home\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: stayType\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: stayType === 'entire place' ? \"You'll have the place to yourself.\" : \"You'll have a private room to yourself.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-book-open\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"House rules\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"This place isn\\u2019t suitable for children under 12 and the host doesn\\u2019t allow pets.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-medal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [host.fullname, \" is a Superhost\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-bookmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Wifi\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Guests often search for this popular amenity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"description\",\n            children: desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amenities-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Amenities\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: amenities.map(amenity => {\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.getAmenityIcon(amenity)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 70\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: amenity\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 113\n                  }, this)]\n                }, amenity, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 52\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BookStay, {\n          stay: stay,\n          getTotalRate: this.getTotalRate,\n          loggedInUser: loggedInUser,\n          toggleMsgModal: toggleMsgModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"stay-review-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stay-review-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stay-rate-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 54\n              }, this), this.getTotalRate().toFixed(1), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"( \", reviews.length, \" reviews )\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 117\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stay-review-ststistics\",\n            children: this.getStayReviewStatistics().map(elCtgRate => elCtgRate)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ReviewList, {\n          reviews: reviews\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Bar-PC/Desktop/sprint 4/src/pages/StayDetails.jsx"],"names":["Component","stayService","ReviewList","BookStay","StayDetails","state","stay","scrollUp","window","scroll","top","behavior","loadStay","stayId","props","match","params","getById","setState","getTotalRate","rates","reviews","map","review","avgRate","sum","reduce","acc","rate","length","getStayReviewStatistics","num","reviewCtgMap","forEach","key","category","ctg","toFixed","elReviews","push","Math","random","componentDidMount","getAmenityIcon","amenity","render","loggedInUser","toggleMsgModal","loc","capacity","desc","amenities","stayType","propertyType","name","host","address","imgUrls","imgUrl","fullname","elCtgRate"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport { stayService } from \"../services/stay-service\";\r\nimport { ReviewList } from '../cmps/stay-details/ReviewList';\r\nimport { BookStay } from \"../cmps/stay-details/BookStay\";\r\n\r\nexport class StayDetails extends Component {\r\n\r\n  state = {\r\n    stay: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadStay()\r\n    this.scrollUp()\r\n  }\r\n\r\n  scrollUp = () => {\r\n    window.scroll({\r\n      top: 0,\r\n      behavior: 'smooth'\r\n    })\r\n  }\r\n\r\n  loadStay = async () => {\r\n    const { stayId } = this.props.match.params\r\n    const stay = await stayService.getById(stayId)\r\n    this.setState({ stay })\r\n  }\r\n\r\n  getTotalRate = () => {\r\n    const rates = this.state.stay.reviews.map(review => review.avgRate)\r\n    const sum = rates.reduce((acc, rate) => {\r\n      acc += rate\r\n      return acc\r\n    }, 0)\r\n    return sum / rates.length\r\n  }\r\n\r\n  getStayReviewStatistics = () => {\r\n    const { reviews } = this.state.stay\r\n    const num = reviews.length\r\n\r\n    if (!reviews) return\r\n\r\n    const reviewCtgMap = {\r\n      \"Cleanliness\": 0,\r\n      \"Accuracy\": 0,\r\n      \"Communication\": 0,\r\n      \"Location\": 0,\r\n      \"Check-in\": 0,\r\n      \"Accessibility\": 0\r\n    }\r\n\r\n    reviews.forEach(review => {\r\n      for (const key in review.category) {\r\n        reviewCtgMap[key] += review.category[key]\r\n      }\r\n    })\r\n\r\n    for (const ctg in reviewCtgMap) {\r\n      reviewCtgMap[ctg] = +(reviewCtgMap[ctg] / num).toFixed(1)\r\n    }\r\n\r\n    const elReviews = []\r\n\r\n    for (const ctg in reviewCtgMap) {\r\n      elReviews.push(<div key={Math.random()} className=\"ctg-statistics\"><h3>{ctg}</h3> <span>{reviewCtgMap[ctg]}</span></div>)\r\n    }\r\n\r\n    return elReviews\r\n  }\r\n\r\n  getAmenityIcon(amenity) {\r\n    switch (amenity) {\r\n      case 'TV':\r\n        return <i className=\"fas fa-tv\"></i>\r\n      case 'Wifi':\r\n        return <i className=\"fas fa-wifi\"></i>\r\n      case 'Air-conditioning':\r\n        return <i className=\"fas fa-fan\"></i>\r\n      case 'Smoking allowed':\r\n        return <i className=\"fas fa-smoking\"></i>\r\n      case 'Pets allowed':\r\n        return <i className=\"fas fa-paw\"></i>\r\n      case 'Cooking basics':\r\n        return <i className=\"fas fa-blender\"></i>\r\n      default:\r\n        return <i className=\"fab fa-airbnb\"></i>\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    const { stay } = this.state\r\n    const {loggedInUser , toggleMsgModal} = this.props\r\n\r\n    if (!stay) return <h1>loading...</h1>\r\n    const { loc, capacity, desc, amenities, stayType, propertyType, reviews, name, host } = stay\r\n\r\n    return (\r\n      <main className=\"stay-details-container page\">\r\n\r\n        <section className=\"stay-details-header\">\r\n          <h1>{name}</h1>\r\n          <div className=\"stay-short-info\">\r\n            <div>\r\n              <span className=\"stay-rate-display\"><i className=\"fas fa-star\"></i>{this.getTotalRate().toFixed(1)}<p>( {reviews.length} reviews )</p></span>\r\n              <span>•</span>\r\n              <p>{loc.address}</p>\r\n            </div>\r\n            <div>\r\n              <button><p><i className=\"fas fa-external-link-alt\"></i>share</p></button>\r\n              <button className=\"stay-save-btn\"><p><i className=\"far fa-heart\"></i>save</p></button>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <div className=\"stay-gallery\">\r\n          {stay.imgUrls.map(imgUrl => <img src={imgUrl} alt=\"stay-gallery-preview-img\" key={imgUrl} />)}\r\n        </div>\r\n\r\n        <section className=\"stay-info-container\">\r\n\r\n          <div className=\"stay-long-info\">\r\n\r\n            <div className=\"stay-long-info-header\">\r\n              <div>\r\n                <h2>{`${propertyType} hosted by ${host.fullname}`}</h2>\r\n                <span>{capacity} guests • {stayType} • {propertyType}</span>\r\n              </div>\r\n              <img src={host.imgUrl} alt=\"\" />\r\n            </div>\r\n\r\n            <div className=\"stay-feature-container\">\r\n              <div>\r\n                <i className=\"fas fa-home\"></i>\r\n                <div>\r\n                  <h3>{stayType}</h3>\r\n                  <h4>{stayType === 'entire place' ? \"You'll have the place to yourself.\" : \"You'll have a private room to yourself.\"}</h4>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <i className=\"fas fa-book-open\"></i>\r\n                <div>\r\n                  <h3>House rules</h3>\r\n                  <h4>This place isn’t suitable for children under 12 and the host doesn’t allow pets.</h4>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <i className=\"fas fa-medal\"></i>\r\n                <div>\r\n                  <h3>{host.fullname} is a Superhost</h3>\r\n                  <h4>Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests.</h4>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <i className=\"fas fa-bookmark\"></i>\r\n                <div>\r\n                  <h3>Wifi</h3>\r\n                  <h4>Guests often search for this popular amenity</h4>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <span className=\"description\">{desc}</span>\r\n\r\n            <div className=\"amenities-list\">\r\n              <h2>Amenities</h2>\r\n              <ul>\r\n                {amenities.map(amenity => { return <li key={amenity}><span>{this.getAmenityIcon(amenity)}</span><span>{amenity}</span></li> })}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <BookStay stay={stay} getTotalRate={this.getTotalRate} loggedInUser={loggedInUser} toggleMsgModal={toggleMsgModal}/>\r\n\r\n        </section>\r\n\r\n        <section className=\"stay-review-container\">\r\n          <div className=\"stay-review-header\">\r\n            <h2>{<span className=\"stay-rate-display\"><i className=\"fas fa-star\"></i>{this.getTotalRate().toFixed(1)}<p>( {reviews.length} reviews )</p></span>}</h2>\r\n            <div className=\"stay-review-ststistics\">\r\n              {this.getStayReviewStatistics().map(elCtgRate => elCtgRate)}\r\n            </div>\r\n          </div>\r\n          <ReviewList reviews={reviews} />\r\n        </section>\r\n        <section>\r\n          \r\n        </section>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}